(this["webpackJsonpmall-admin-app"]=this["webpackJsonpmall-admin-app"]||[]).push([[0],{46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){"use strict";c.r(t);var r=c(1),n=c.n(r),s=c(22),i=c.n(s),a=c(8),l=c(2),o=c(5),d=c(7),j=c.n(d),b=c(0);function m(e){return Object(b.jsxs)("div",{className:"left-side sticky-left-side",children:[Object(b.jsx)("div",{className:"logo",children:Object(b.jsx)(a.b,{to:"/",children:Object(b.jsx)("img",{src:"images/logo.png",alt:""})})}),Object(b.jsx)("div",{className:"left-side-inner",children:Object(b.jsxs)("ul",{className:"nav nav-pills nav-stacked custom-nav",children:[Object(b.jsx)("li",{children:Object(b.jsxs)(a.b,{to:"/goodsList",children:[" ",Object(b.jsx)("span",{children:"\u5546\u54c1\u5217\u8868"})]})}),Object(b.jsx)("li",{children:Object(b.jsxs)(a.b,{to:"/goodsAdd",children:[" ",Object(b.jsx)("span",{children:"\u6dfb\u52a0\u5546\u54c1"})]})})]})})]})}function u(e){var t=n.a.useState([]),c=Object(o.a)(t,2),r=c[0],s=c[1];n.a.useEffect((function(){var e=n.a.$getBackendUrl("/seckill/getAll");j.a.get(e).then((function(e){var t=e.data;0===t.code?s(t.data):n.a.$logCommonError(t)})).catch((function(e){n.a.$logRuntimeError(e)}))}),[]);return Object(b.jsxs)("div",{className:"main-content",children:[Object(b.jsx)(m,{}),Object(b.jsxs)("div",{className:"content-box",children:[Object(b.jsx)("h2",{className:"content-header",children:"\u5546\u54c1\u5217\u8868"}),Object(b.jsx)("div",{className:"table-restrictor",children:Object(b.jsxs)("table",{className:"table",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"\u7f16\u53f7"}),Object(b.jsx)("th",{children:"\u56fe\u7247"}),Object(b.jsx)("th",{children:"\u5546\u54c1\u540d\u79f0"}),Object(b.jsx)("th",{children:"\u4ef7\u683c"}),Object(b.jsx)("th",{children:"\u5e93\u5b58"}),Object(b.jsx)("th",{children:"\u64cd\u4f5c"})]})}),Object(b.jsx)("tbody",{children:r.map((function(e,t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:e.productId}),Object(b.jsx)("th",{children:Object(b.jsx)("img",{src:n.a.$getStaticUrl(e.pic),alt:""})}),Object(b.jsx)("th",{children:e.title}),Object(b.jsx)("th",{children:e.price}),Object(b.jsx)("th",{children:e.inventory}),Object(b.jsxs)("th",{children:[Object(b.jsx)("button",{className:"btn btn-danger",onClick:function(){return function(e,t,c){var i=n.a.$getBackendUrl("/product/deleteProductAndSeckill");j.a.get(i,{params:{productId:t,seckillId:c}}).then((function(t){var c=t.data;if(0===c.code){var i=r.concat();i.splice(e,1),s(i)}else n.a.$logCommonError(c)})).catch((function(e){n.a.$logRuntimeError(e)}))}(t,e.productId,e.seckillId)},children:"\u5220\u9664"}),Object(b.jsx)("button",{className:"btn btn-default",children:"\u67e5\u770b"})]})]},t)}))})]})})]})]})}var h=c(11),O=c(6);function x(e){var t=n.a.useState({title:"",disc:"",price:"",inventory:"",startTime:"",endTime:"",picFile:null}),c=Object(o.a)(t,2),r=c[0],s=c[1],i=n.a.useState({titleErrorMsg:"",discErrorMsg:"",priceErrorMsg:"",inventoryErrorMsg:"",startTimeErrorMsg:"",endTimeErrorMsg:"",picErrorMsg:null}),a=Object(o.a)(i,2),l=a[0],d=a[1],u=function(e,t){s(Object(O.a)(Object(O.a)({},r),{},Object(h.a)({},t,e.target.value)))};return Object(b.jsxs)("div",{className:"main-content",children:[Object(b.jsx)(m,{}),Object(b.jsxs)("div",{className:"content-box",children:[Object(b.jsx)("h2",{className:"content-header",children:"\u6dfb\u52a0\u5546\u54c1"}),Object(b.jsx)("div",{className:"form-restrictor",children:Object(b.jsxs)("form",{className:"el-form",action:"",children:[Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{className:"item-label is-required",for:"title",children:"\u5546\u54c1\u540d\u79f0\uff1a"}),Object(b.jsx)("input",{className:"item-input",type:"text",value:r.title,onChange:function(e){return u(e,"title")}}),Object(b.jsx)("div",{className:"error-msg",children:l.titleErrorMsg})]}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{className:"item-label is-required",for:"disc",children:"\u4fc3\u9500\u6807\u9898\uff1a"}),Object(b.jsx)("input",{className:"item-input",type:"text",value:r.disc,onChange:function(e){return u(e,"disc")}}),Object(b.jsx)("div",{className:"error-msg",children:l.discErrorMsg})]}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{className:"item-label is-required",for:"price",children:"\u5546\u54c1\u4ef7\u683c\uff1a"}),Object(b.jsx)("input",{className:"item-input",type:"text",value:r.price,onChange:function(e){return u(e,"price")}}),Object(b.jsx)("div",{className:"error-msg",children:l.priceErrorMsg})]}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{className:"item-label is-required",for:"inventory",children:"\u5546\u54c1\u5e93\u5b58\uff1a"}),Object(b.jsx)("input",{className:"item-input",type:"text",value:r.inventory,onChange:function(e){return u(e,"inventory")}}),Object(b.jsx)("div",{className:"error-msg",children:l.inventoryErrorMsg})]}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{className:"item-label is-required",for:"startTime",children:"\u5f00\u59cb\u65e5\u671f\uff1a"}),Object(b.jsx)("input",{className:"item-input",type:"text",value:r.startTime,onChange:function(e){return u(e,"startTime")}}),Object(b.jsx)("div",{className:"error-msg",children:l.startTimeErrorMsg})]}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{className:"item-label is-required",for:"endTime",children:"\u7ed3\u675f\u65e5\u671f\uff1a"}),Object(b.jsx)("input",{className:"item-input",type:"text",value:r.endTime,onChange:function(e){return u(e,"endTime")}}),Object(b.jsx)("div",{className:"error-msg",children:l.endTimeErrorMsg})]}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{className:"item-label is-required",for:"picFile",children:"\u5546\u54c1\u56fe\u7247\uff1a"}),Object(b.jsx)("input",{type:"file",id:"input-picFile",onChange:function(){return function(){var e=document.querySelector("#input-picFile").files[0];console.log(e),s(Object(O.a)(Object(O.a)({},r),{},{picFile:e}))}()}}),Object(b.jsx)("div",{className:"error-msg",children:l.picErrorMsg})]}),Object(b.jsxs)("div",{className:"form-controller",children:[Object(b.jsx)("button",{className:"btn btn-danger",type:"button",onClick:function(){s({title:"",disc:"",price:"",inventory:"",startTime:"",endTime:"",picFile:null})},children:"\u91cd\u7f6e"}),Object(b.jsx)("button",{className:"btn btn-info",type:"button",onClick:function(){return function(){var e=n.a.$getBackendUrl("/product/createProductAndSeckill"),t={title:r.title,disc:r.disc,price:r.price,pic:r.picFile.name,inventory:r.inventory,startTime:r.startTime,endTime:r.endTime};console.log(t),j.a.post(e,t).then((function(e){var t=e.data;0!==t.code&&(d(Object(O.a)(Object(O.a)({},l),{},{picErrorMsg:t.message})),n.a.$logCommonError(t))})).catch((function(e){n.a.$logRuntimeError(e)}));var c=n.a.$getBackendUrl("/product/savePic"),s=r.picFile;console.log(s);var i=new FormData;i.append("picFile",s),j.a.post(c,i).then((function(e){var t=e.data;0!==t.code&&(d(Object(O.a)(Object(O.a)({},l),{},{picErrorMsg:t.message})),n.a.$logCommonError(t))})).catch((function(e){n.a.$logRuntimeError(e)}))}()},children:"\u63d0\u4ea4"})]})]})})]})]})}n.a.$staticHeader="http://localhost:8081",n.a.$backendHeader="http://localhost:8080",n.a.$getStaticUrl=function(e){return n.a.$staticHeader+e},n.a.$getBackendUrl=function(e){return n.a.$backendHeader+e},n.a.$logCommonError=function(e){console.log("error code:"+e.status),console.log("error info: "+e.error)},n.a.$logRuntimeError=function(e){console.log("runtime error:"+e.status)};c(46),c(47);function p(){return Object(b.jsx)(a.a,{children:Object(b.jsxs)(l.d,{children:[Object(b.jsx)(l.b,{path:"/goodsList",element:Object(b.jsx)(u,{})}),Object(b.jsx)(l.b,{path:"/goodsAdd",element:Object(b.jsx)(x,{})}),Object(b.jsx)(l.b,{path:"/",element:Object(b.jsx)(l.a,{replace:!0,to:"/goodsList"})})]})})}i.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(p,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.c5b9d6ca.chunk.js.map