(this["webpackJsonpsale-mall-app"]=this["webpackJsonpsale-mall-app"]||[]).push([[0],{46:function(e,t,c){},48:function(e,t,c){},49:function(e,t,c){},50:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c.n(a),n=c(21),r=c.n(n),i=c(7),l=c(2),d=c(0);function o(e){return Object(d.jsxs)("header",{children:[Object(d.jsx)("div",{className:"top-nav",children:Object(d.jsxs)("div",{className:"width-restrictor top-nav-flex",children:[Object(d.jsxs)("ul",{className:"top-left",children:[Object(d.jsx)("li",{children:"\u8bf7\u767b\u5f55"}),Object(d.jsx)("li",{children:"\u514d\u8d39\u6ce8\u518c"})]}),Object(d.jsxs)("ul",{className:"top-right",children:[Object(d.jsx)("li",{children:"\u6211\u7684\u8ba2\u5355"}),Object(d.jsx)("li",{children:"\u5ba2\u6237\u670d\u52a1"})]})]})}),Object(d.jsx)("div",{className:"mid-header",children:Object(d.jsxs)("div",{className:"width-restrictor mid-header-flex",children:[Object(d.jsx)("img",{className:"logo",src:"./images/top-logo.jpg",alt:""}),Object(d.jsx)("div",{className:"right-band",children:"\u6211\u7684\u8d2d\u7269\u8f66"})]})}),Object(d.jsx)("div",{className:"bottom-nav",children:Object(d.jsx)("div",{className:"width-restrictor",children:Object(d.jsxs)("ul",{className:"nav-list",children:[Object(d.jsx)("li",{className:1===e.tableId?"on":"",children:"\u7279\u4ef7\u79d2\u6740"}),Object(d.jsx)("li",{className:2===e.tableId?"on":"",children:"\u54c1\u724c\u79d2\u6740"}),Object(d.jsx)("li",{className:3===e.tableId?"on":"",children:"\u54c1\u724c\u79d2\u6740"})]})})})]})}var j=c(3),b=c(6),m=c.n(b);function h(e){var t=s.a.useState([]),c=Object(j.a)(t,2),a=c[0],n=c[1];return s.a.useEffect((function(){var e=s.a.$getBackendUrl("/seckill/getAll");m.a.get(e).then((function(e){var t=e.data;0===t.code?n(t.data):s.a.$logCommonError(t)})).catch((function(e){s.a.$logRuntimeError(e)}))}),[]),Object(d.jsx)("ul",{className:"goods-list",children:a.map((function(e,t){return Object(d.jsxs)("li",{className:"goods-item",children:[Object(d.jsxs)("div",{className:"goods-main",children:[Object(d.jsx)("img",{src:s.a.$getStaticUrl(e.pic),alt:""}),Object(d.jsx)("h4",{className:"goods-title",children:e.title}),Object(d.jsx)("p",{className:"goods-disc",children:e.disc})]}),Object(d.jsxs)("div",{className:"goods-info",children:[Object(d.jsxs)("div",{className:"price",children:[Object(d.jsx)("em",{children:"\uffe5"}),e.price]}),Object(d.jsx)(i.b,{to:"/detail/"+e.seckillId,target:"_blank",children:Object(d.jsx)("div",{className:"buy-btn",children:"\u7acb\u5373\u62a2\u8d2d"})})]})]},t)}))})}function O(e){return Object(d.jsx)("footer",{children:Object(d.jsx)("div",{className:"footer-content"})})}c(46);function u(e){return Object(d.jsxs)("div",{children:[Object(d.jsx)(o,{tableId:1}),Object(d.jsx)("div",{className:"main-band",children:Object(d.jsx)("div",{className:"width-restrictor",children:Object(d.jsx)("div",{className:"band-1",children:Object(d.jsx)(h,{})})})}),Object(d.jsx)(O,{})]})}var x=c(8),f=c.n(x),v=c(22);c(48);function p(e){var t=Object(l.g)(),c=Object(l.f)(),a=s.a.useState({seckillId:t.seckillId,productId:"",title:"",disc:"",pic:"",inventory:"",price:"",startTime:"",endTime:""}),n=Object(j.a)(a,2),r=n[0],i=n[1],b=s.a.useState(!1),h=Object(j.a)(b,2),u=h[0],x=h[1],p=s.a.useState(!1),g=Object(j.a)(p,2),N=g[0],$=g[1];s.a.useEffect((function(){var e=s.a.$getBackendUrl("/seckill/getDetail?seckillId="+t.seckillId);m.a.get(e).then((function(e){var t=e.data;if(0===t.code){t.data.startTime=f()(t.data.startTime).format("YYYY-MM-DD HH:mm:ss"),t.data.endTime=f()(t.data.endTime).format("YYYY-MM-DD HH:mm:ss"),i(t.data);var c=I(k(),t.data.startTime);if(c<0)x(!0);else var a=setInterval((function(){0===--c&&(clearInterval(a),x(!0))}),1e3);I(k(),t.data.endTime)<0&&(x(!1),$(!0))}else s.a.$logCommonError(t)})).catch((function(e){s.a.$logRuntimeError(e)}))}),[t]);var k=function(){return f()().format("YYYY-MM-DD HH:mm:ss")},I=function(e,t){return f()(t).diff(e,"second")};return Object(d.jsxs)("div",{children:[Object(d.jsx)(o,{tableId:0}),Object(d.jsx)("div",{className:"main-band",children:Object(d.jsx)("div",{className:"width-restrictor",children:Object(d.jsxs)("div",{className:"product-intro",children:[Object(d.jsx)("div",{className:"preview",children:Object(d.jsx)("img",{src:s.a.$getStaticUrl(r.pic),alt:""})}),Object(d.jsxs)("div",{className:"item-info",children:[Object(d.jsx)("h2",{className:"product-title",children:r.title}),Object(d.jsxs)("ul",{children:[Object(d.jsxs)("li",{className:"info-row",children:[Object(d.jsx)("span",{className:"info-name",children:"\u79d2\u6740\u4ef7"}),Object(d.jsxs)("span",{className:"info-content price",children:[Object(d.jsx)("em",{children:"\uffe5"}),r.price]})]}),Object(d.jsxs)("li",{className:"info-row",children:[Object(d.jsx)("span",{className:"info-name",children:"\u5f00\u59cb\u65f6\u95f4"}),Object(d.jsx)("span",{className:"info-content",children:r.startTime})]}),Object(d.jsxs)("li",{className:"info-row",children:[Object(d.jsx)("span",{className:"info-name",children:"\u7ed3\u675f\u65f6\u95f4"}),Object(d.jsx)("span",{className:"info-content",children:r.endTime})]})]}),Object(d.jsx)("div",{className:"purchase",children:u?Object(d.jsx)("div",{className:"purchase-btn btn-red",onClick:function(){return function(){if(!1!==u){var e=Object(v.a)(16),a=s.a.$getBackendUrl("/create/seckill/"+t.seckillId),n=new FormData;n.append("userId","1"),n.append("amount","1"),n.append("serial",e),m.a.post(a,n).then((function(t){var a=t.data;0===a.code?(console.log("success!"),c("/result/"+e)):s.a.$logCommonError(a)})).catch((function(e){s.a.$logRuntimeError(e)}))}}()},children:"\u7acb\u523b\u8d2d\u4e70"}):Object(d.jsx)("div",{className:"wait-btn btn-black",children:N?"\u5df2\u7ed3\u675f":"\u7b49\u5f85\u5f00\u59cb"})})]})]})})}),Object(d.jsx)(O,{})]})}c(49);function g(e){var t=Object(l.g)(),c=s.a.useState({orderId:"",orderState:""}),a=Object(j.a)(c,2),n=a[0],r=a[1];return s.a.useEffect((function(){var e;r({orderId:"",orderState:"\u67e5\u8be2\u4e2d..."}),(e=3e3,new Promise((function(t){return setTimeout(t,e)}))).then((function(){var e=s.a.$getBackendUrl("/order/getBySerial?serial="+t.serial);m.a.get(e).then((function(e){var t=e.data;0===t.code?r({orderId:t.data,orderState:"\u6210\u529f"}):4===t.code?(r({orderState:"\u7cfb\u7edf\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u5237\u65b0\u9875\u9762\u91cd\u8bd5"}),s.a.$logCommonError(t)):s.a.$logCommonError(t)})).catch((function(e){s.a.$logRuntimeError(e)}))}))}),[t]),Object(d.jsxs)("div",{children:[Object(d.jsx)(o,{tableId:0}),Object(d.jsx)("div",{className:"main-band",children:Object(d.jsx)("div",{className:"width-restrictor",children:Object(d.jsxs)("div",{className:"result-box",children:[Object(d.jsx)("h2",{children:"\u8ba2\u5355\u6d41\u6c34\u53f7:"+t.serial}),Object(d.jsx)("p",{children:n.orderState})]})})}),Object(d.jsx)(O,{})]})}s.a.$staticHeader="http://localhost:8081",s.a.$backendHeader="http://localhost:8080",s.a.$getStaticUrl=function(e){return s.a.$staticHeader+e},s.a.$getBackendUrl=function(e){return s.a.$backendHeader+e},s.a.$logCommonError=function(e){console.log("error code:"+e.code),console.log("error info: "+e.message)},s.a.$logRuntimeError=function(e){console.log("runtime error:"+e.status)};c(50),c(51);function N(){return Object(d.jsx)(i.a,{children:Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{path:"/",element:Object(d.jsx)(u,{})}),Object(d.jsx)(l.a,{path:"/detail/:seckillId",element:Object(d.jsx)(p,{})}),Object(d.jsx)(l.a,{path:"/result/:serial",element:Object(d.jsx)(g,{})})]})})}r.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(N,{})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.6550b72a.chunk.js.map